[dotenv-railsをインストールして.envを読み込めるようにする]
group :development, :test do
  gem 'dotenv-rails' 
end
↓
bundle install


[プロジェクトルートに .env ファイルを作成環境変数を設定 ]
key=value


[以下のファイルが.gitignore の設定に含まれてるか確認]
.env*
!/.env*.erb
config/master.key


[compose.ymlで.envをつかうようにする]
<例> environment:
        POSTGRES_USER: ${POSTGRES_USER}


[Dockerfileも機密情報を確認する]
 （そもそもDockerfileで環境変数は使わん） 
 .entrypoint.shでは.envを読み込むコード書いてから使える


[データベースのマイグレーションを実行]
bin/rails db:migrate


[テストデータベースを作成]
bin/rails db:create


[テストデータベースを準備]
bin/rails db:test:prepare


[テスト実行]
bin/rails test