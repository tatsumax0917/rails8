参考：https://qiita.com/Kento210/items/5f153bc20e9ba28375fd

※PGの時に追加でいじるところは
・config/database.yml
・Gemfile
・compose.yml

========================

〇　プロジェクトを新規作成（コンテナ外で作成）
docker compose run --rm web rails new . --css=sass --database=postgresql

※上記オプション指定したらGemfileに自動で 'pg'が追加される
参考：
GemfileのDBがsqliteじゃなくてpgに変更
gem "pg", "~> 1.1"


〇　Gemfileに追加
group :development, :test do
  gem 'dotenv-rails' 
end
↓
bundle install


〇　config/database.ymlを下記に書き換える

default: &default
  adapter: postgresql
  encoding: unicode
  pool: <%= ENV.fetch("RAILS_MAX_THREADS") { 5 } %>
  host: db
  username: <%= ENV["POSTGRES_USER"] %>
  password: <%= ENV["POSTGRES_PASSWORD"] %>

development:
  <<: *default
  database: app_development

test:
  <<: *default
  database: app_test

production:
  <<: *default
  database: app_production


以上

＝＝そのあと＝＝
Procfileとか使うときはcompose.ymlのcommandに
bin/devを設定してprockfileもいじる必要ある

rails s -p 3000 -b '0.0.0.0'

＝＝＝補足＝＝＝
pg使うときはDockerfileには、
・libpq-dev
・postgresql-client
の2つが必要